<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vancouver Sun - Subscription</title>

    <meta name="chat-context-publication" content="Vancouver Sun">
    <meta name="chat-context-page" content="Subscription">

    <style>
        /* --- GLOBAL STYLES (Newspaper Look) --- */
        body { margin: 0; font-family: 'Times New Roman', serif; background-color: #e8e8e8; color: #1a1a1a; }
        
        /* HEADER */
        header { background: linear-gradient(to bottom, #003d7a, #0052a3); color: #fff; padding: 20px 0; border-bottom: 5px solid #ffa500; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 25px; }
        .header-top { display: flex; justify-content: space-between; align-items: center; padding-bottom: 12px; border-bottom: 2px solid rgba(255,255,255,0.2); }
        .logo { font-size: 36px; font-weight: bold; text-transform: uppercase; letter-spacing: 2px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .tagline { font-size: 11px; font-style: italic; color: #ffa500; margin-top: 5px; }
        
        /* NAVIGATION */
        nav { padding-top: 12px; }
        nav a { color: #fff; text-decoration: none; margin-right: 30px; font-family: 'Arial', sans-serif; font-size: 15px; font-weight: 600; text-transform: uppercase; transition: color 0.3s ease; }
        nav a:hover { color: #ffa500; }

        /* CONTENT LAYOUT */
        .main-content { background: #fff; margin-top: 25px; padding: 50px; box-shadow: 0 3px 15px rgba(0,0,0,0.1); min-height: 500px; border-left: 3px solid #0052a3; }
        h1 { font-size: 38px; margin-bottom: 12px; color: #003d7a; font-weight: bold; line-height: 1.2; }
        h2 { font-size: 28px; color: #003d7a; margin-top: 40px; margin-bottom: 15px; }
        h3 { font-size: 22px; color: #003d7a; margin-top: 25px; margin-bottom: 10px; }
        p { line-height: 1.8; font-size: 17px; margin-bottom: 22px; color: #2a2a2a; }
        .intro-text { font-size: 19px; color: #0052a3; font-style: italic; margin-bottom: 30px; padding: 20px; background-color: #f0f7ff; border-left: 4px solid #ffa500; }

        /* SUBSCRIPTION PLANS */
        .plans-container { display: flex; gap: 25px; margin: 40px 0; flex-wrap: wrap; }
        .plan-card { flex: 1; min-width: 280px; background: linear-gradient(to bottom, #f9f9f9, #fff); border: 2px solid #0052a3; border-radius: 8px; padding: 30px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .plan-card h3 { margin-top: 0; color: #003d7a; border-bottom: 3px solid #ffa500; padding-bottom: 10px; }
        .plan-price { font-size: 32px; font-weight: bold; color: #0052a3; margin: 20px 0; }
        .plan-price span { font-size: 16px; color: #666; font-weight: normal; }
        .plan-features { list-style: none; padding: 0; margin: 20px 0; }
        .plan-features li { padding: 10px 0; border-bottom: 1px solid #eee; font-size: 15px; }
        .plan-features li:before { content: "✓ "; color: #ffa500; font-weight: bold; margin-right: 8px; }
        .subscribe-btn { display: block; width: 100%; padding: 15px; background-color: #0052a3; color: white; text-align: center; text-decoration: none; border-radius: 5px; font-weight: bold; font-size: 16px; margin-top: 20px; transition: background-color 0.3s ease; }
        .subscribe-btn:hover { background-color: #003d7a; }

        /* BENEFITS SECTION */
        .benefits { background-color: #f0f7ff; padding: 30px; margin: 40px 0; border-radius: 8px; border: 2px solid #0052a3; }
        .benefits h2 { margin-top: 0; }
        .benefits ul { list-style: none; padding: 0; }
        .benefits li { padding: 12px 0; font-size: 16px; }
        .benefits li:before { content: "▸ "; color: #ffa500; font-weight: bold; margin-right: 10px; }

        /* FOOTER */
        footer { background: linear-gradient(to top, #001f3f, #003d7a); color: #aaa; padding: 45px 0; margin-top: 50px; text-align: center; font-family: 'Arial', sans-serif; font-size: 13px; }

        /* --- CHAT BUTTON STYLES --- */
        #endChatButton {
            display: none;
            position: fixed; bottom: 35px; right: 30px; z-index: 999999;
            padding: 10px 20px; background-color: #d9534f; color: white;
            border: none; border-radius: 5px; cursor: pointer; font-family: 'Arial', sans-serif; font-weight: bold;
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
        }
        #endChatButton:hover { background-color: #c9302c; }
        #endChatButton:disabled { background-color: #ccc; cursor: not-allowed; }
    </style>

    <script>
        !function (o, i, s, c) { var a, p, h, u = [], l = []; function e() { var t = "You must provide a supported major version."; try { if (!c) throw new Error(t); var e, n = "https://sdk.cxengage.net/webchat/2.2.3/", r = "serenovawebchat"; if ((e = "string" == typeof this.response ? JSON.parse(this.response) : this.response).url) { var o = i.getElementsByTagName("script")[0], s = i.createElement("script"); s.async = !0; var a = c.match(/([0-9]+)\.?([0-9]+)?\.?([0-9]+)?/), p = a && a[1]; if (a && a[3]) s.src = n + r + "." + c + ".min.js"; else { if (!(1 <= p && e["v" + p])) throw new Error(t); s.src = e["v" + p] } o.parentNode.insertBefore(s, o) } } catch (e) { e.message === t && console.error(e) } } o[s] = { init: function () { a = arguments; var t = { then: function (e) { return l.push({ type: "t", next: e }), t }, catch: function (e) { return l.push({ type: "c", next: e }), t } }; return t }, on: function () { u.push(arguments) }, render: function () { p = arguments }, destroy: function () { h = arguments } }, o.__onWebMessengerHostReady__ = function (e) { if (delete o.__onWebMessengerHostReady__, o[s] = e, a) for (var t = e.init.apply(e, a), n = 0; n < l.length; n++) { var r = l[n]; t = "t" === r.type ? t.then(r.next) : t.catch(r.next) } p && e.render.apply(e, p), h && e.destroy.apply(e, h); for (n = 0; n < u.length; n++)e.on.apply(e, u[n]) }; var t = new XMLHttpRequest; t.addEventListener("load", e), t.open("GET", "https://sdk.cxengage.net/webchat/2.2.3/loader.json", !0), t.responseType = "json", t.send() }(window, document, "SerenovaWebChat", "2");
    </script>
</head>
<body>

    <header>
        <div class="container">
            <div class="header-top">
                <div>
                    <div class="logo">Vancouver Sun</div>
                    <div class="tagline">The Voice of British Columbia Since 1912</div>
                </div>
            </div>
            <nav>
                <a href="vancouver-sun-index.html">Home</a>
                <a href="vancouver-sun-faqs.html">FAQs</a>
                <a href="vancouver-sun-subscription.html">Subscription</a>
            </nav>
        </div>
    </header>

    <div class="container main-content">
        <h1>Subscribe to the Vancouver Sun</h1>
        
        <div class="intro-text">
            Stay informed with award-winning journalism covering Vancouver, British Columbia, and beyond. Choose the subscription plan that's right for you.
        </div>

        <h2>Subscription Plans</h2>

        <div class="plans-container">
            <div class="plan-card">
                <h3>Digital Access</h3>
                <div class="plan-price">$9.99<span>/month</span></div>
                <ul class="plan-features">
                    <li>Unlimited access to vancouversun.com</li>
                    <li>Daily e-Edition replica</li>
                    <li>Breaking news alerts</li>
                    <li>Access on all devices</li>
                    <li>Subscriber-exclusive newsletters</li>
                    <li>Ad-light experience</li>
                </ul>
                <a href="#" class="subscribe-btn">Subscribe Now</a>
            </div>

            <div class="plan-card">
                <h3>Print + Digital</h3>
                <div class="plan-price">$24.99<span>/month</span></div>
                <ul class="plan-features">
                    <li>7-day home delivery</li>
                    <li>All Digital Access benefits</li>
                    <li>Weekend magazines included</li>
                    <li>Exclusive subscriber events</li>
                    <li>Premium content library</li>
                    <li>Crossword puzzles & games</li>
                </ul>
                <a href="#" class="subscribe-btn">Subscribe Now</a>
            </div>

            <div class="plan-card">
                <h3>Weekend Print + Digital</h3>
                <div class="plan-price">$14.99<span>/month</span></div>
                <ul class="plan-features">
                    <li>Saturday & Sunday delivery</li>
                    <li>All Digital Access benefits</li>
                    <li>Weekend magazines & sections</li>
                    <li>E-Edition access</li>
                    <li>Breaking news alerts</li>
                    <li>Subscriber newsletters</li>
                </ul>
                <a href="#" class="subscribe-btn">Subscribe Now</a>
            </div>
        </div>

        <div class="benefits">
            <h2>Why Subscribe to the Vancouver Sun?</h2>
            <ul>
                <li><strong>Local Expertise:</strong> In-depth coverage of Vancouver, Metro Vancouver, and British Columbia news that matters to you</li>
                <li><strong>Award-Winning Journalism:</strong> Investigative reporting and analysis from BC's most trusted news source</li>
                <li><strong>Breaking News:</strong> Be the first to know with real-time updates on developing stories</li>
                <li><strong>Sports Coverage:</strong> Comprehensive reporting on the Canucks, BC Lions, Whitecaps, and local teams</li>
                <li><strong>Business Insights:</strong> Expert analysis on the BC economy, real estate, and market trends</li>
                <li><strong>Arts & Entertainment:</strong> Your guide to Vancouver's vibrant cultural scene</li>
                <li><strong>Exclusive Content:</strong> Access to subscriber-only features, columns, and special investigations</li>
                <li><strong>Community Connection:</strong> Letters, opinion pieces, and community voices from across the region</li>
            </ul>
        </div>

        <h2>Special Offers</h2>
        <p>New subscribers can enjoy their first month for just <strong>$1</strong> on any digital plan. Students and educators receive 50% off regular subscription rates with valid ID. Contact our subscription team at 1-800-663-2662 for more information about group rates and corporate subscriptions.</p>

        <h3>Gift Subscriptions</h3>
        <p>Give the gift of quality journalism. Vancouver Sun gift subscriptions are available for 3, 6, or 12 months and make perfect gifts for family, friends, or business associates. Each gift subscription includes a personalized announcement card.</p>

        <h3>Customer Service</h3>
        <p>Questions about your subscription? Our customer service team is available Monday through Friday, 7:00 AM to 5:00 PM PST. Call us at 1-800-663-2662 or email subscriptions@vancouversun.com. Manage your account online anytime at vancouversun.com/myaccount.</p>
    </div>

    <footer>
        <div class="container">
            &copy; 2026 Postmedia Network Inc. All rights reserved.<br>
            Unauthorized distribution, transmission or republication strictly prohibited.
        </div>
    </footer>

    <button id="endChatButton">End Chat</button>

    <script>
        // Global Configuration
        const CHAT_CONFIG = {
            integrationId: '695ebfa206a2d040ec8f035a',
            storageType: 'sessionStorage'
        };

        let activeConversationId = null;
        const endChatBtn = document.getElementById('endChatButton');

        /**
         * 1. GET CONTEXT
         * Reads the <meta> tags from the <head> of the current HTML file.
         */
        function getPageContext() {
            const pubMeta = document.querySelector('meta[name="chat-context-publication"]');
            const pageMeta = document.querySelector('meta[name="chat-context-page"]');

            return {
                publication: pubMeta ? pubMeta.content : 'Unknown Publication',
                pageSource: pageMeta ? pageMeta.content : 'Unknown Page',
                url: window.location.href
            };
        }

        /**
         * 2. INIT CHAT
         * Initializes the SDK and sends the specific page data.
         */
        function initChatWidget() {
            if (typeof SerenovaWebChat === 'undefined') {
                setTimeout(initChatWidget, 100);
                return;
            }

            const options = {
                integrationId: CHAT_CONFIG.integrationId,
                canUserSeeConversationList: true,
                browserStorage: CHAT_CONFIG.storageType,
                customText: {
                    headerText: "How can I help?",
                    prechatCaptureGreetingText: `Hi! I'm Postmedia's virtual assistant.`,
                    prechatCaptureConfirmationText: `Thank you. How can I help you today?`,
                    notificationSettingsConnected: "",
                },

                prechatCapture: {
                    fields: [
                        {
                            type: 'text',
                            name: 'email',
                            label: 'To get started, please provide your email address:',
                            placeholder: 'your email',
                        },
                    ],
                },
                delegate: {
                    beforeDisplay: (message) => {
                        if (message?.metadata?.conversationId) {
                            activeConversationId = message.metadata.conversationId;
                        }
                        return message;
                    }
                }
            };

            SerenovaWebChat.init(options).then(() => {
                console.log("SDK Initialized successfully.");

                const context = getPageContext();
                console.log(`[Chat Context] Sending: ${context.pageSource} (${context.publication})`);

                SerenovaWebChat.updateUser({
                    properties: {
                        publication: context.publication,
                        pageSource: context.pageSource,
                        sourceUrl: context.url
                    }
                }).catch(err => console.error("Failed to update user properties:", err));
                
                // Inject CSS to prevent iOS zoom on input focus
                let zoomFix = document.createElement('style');
                zoomFix.innerHTML = `@supports (-webkit-touch-callout: none) { textarea, input { font-size: 16px !important; } }`;

                document.getElementById('web-messenger-container').appendChild(zoomFix);

                // Show the "End Chat" button when the widget is open and hide it when closed
                SerenovaWebChat.on('widget:opened', () => endChatBtn.style.display = 'block');
                SerenovaWebChat.on('widget:closed', () => endChatBtn.style.display = 'none');
            });
        }

        /**
         * 3. END CHAT FUNCTIONALITY
         * Gracefully disconnects and resets the session.
         */
        function handleEndChat() {
            endChatBtn.innerText = "Ending...";
            endChatBtn.disabled = true;

            const performReset = () => {
                SerenovaWebChat.destroy();
                sessionStorage.clear();
                activeConversationId = null;
                endChatBtn.style.display = 'none';
                endChatBtn.innerText = "End Chat";
                endChatBtn.disabled = false;
                
                setTimeout(initChatWidget, 1000);
            };

            if (activeConversationId) {
                SerenovaWebChat.sendMessage({
                    type: 'text',
                    text: 'disconnect-conversation',
                    metadata: { type: 'disconnect-conversation' }
                }, activeConversationId)
                .then(() => setTimeout(performReset, 500))
                .catch(() => performReset());
            } else {
                performReset();
            }
        }

        document.addEventListener('DOMContentLoaded', initChatWidget);
        endChatBtn.addEventListener('click', handleEndChat);

    </script>
</body>
</html>
